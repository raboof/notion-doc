\usepackage{babel}
\usepackage[latin1]{inputenc}
\usepackage{ae}
\usepackage{url}
\usepackage{html}
\usepackage[dvipdfm,hypertex]{hyperref}
\usepackage{graphicx}
\usepackage{color}
\usepackage{makeidx}
\usepackage{tabularx}
\usepackage{textcomp}
\usepackage[nottoc]{tocbibind}
\usepackage{enumerate} % GNU FDL needs this
\usepackage[a4paper]{geometry}
\usepackage{calc}

% URL settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\urlstyle{rm}

% listings package
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%begin{latexonly}
\usepackage{listings}

\lstset{
  extendedchars=true,
  breaklines=true,
  basicstyle=\tt,
  alsoletter={",},
  alsoother={\_},
}
%end{latexonly}

% Some markup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\note}[1]{\color{red}**#1**}
\newcommand{\file}[1]{\emph{#1}}
\newcommand{\type}[1]{#1}
\newcommand{\spec}[1]{#1}
\newcommand{\key}[1]{\textbf{#1}}
\newcommand{\indextype}[1]{\index{#1@\type{#1}}}

%begin{latexonly}
\newcommand{\code}[1]{\lstinline!#1!}
\newcommand{\var}[1]{\lstinline!#1!}
\newcommand{\command}[1]{\lstinline!#1!}

\newcommand{\hyperlabel}[1]{\hypertarget{#1}{}\label{#1}}
\newcommand{\fnref}[1]{\hyperlink{fn:#1}{\code{#1}}}
\newcommand{\myhref}[2]{\hyperlink{#1}{#2}}
%end{latexonly}

\begin{htmlonly}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\var}[1]{\texttt{#1}}
\newcommand{\command}[1]{\texttt{#1}}

\newcommand{\hyperlabel}[1]{\label{#1}}
\newcommand{\fnref}[1]{\htmlref{\texttt{#1}}{fn:#1}}
\newcommand{\myhref}[2]{\htmlref{#2}{#1}}
\end{htmlonly}

% function tables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%begin{latexonly}
\newlength{\fndw}
\newlength{\descw}
\settowidth{\descw}{\begin{tabular}{ll}Description: & \end{tabular}}
\setlength{\fndw}{\textwidth}
\addtolength{\fndw}{-\descw}

\newenvironment{function}{
  \begin{tabular*}{\textwidth}{rp{\fndw}}
}{
  \\
  \end{tabular*}
  \par
}
\newcommand{\synopsis}[1]{
  Synopsis: & \code{#1} \\
  Description: &
}
\newcommand{\funcname}[1]{
  Function: & \code{#1} \\
  Description: &
}
\newenvironment{funcdesc}{}{}
%end{latexonly}

\begin{htmlonly}
\newenvironment{function}{
  \begin{description}
}{
  \end{description}
}
\newcommand{\synopsis}[1]{
  \item[Synopsis:] \texttt{#1}
}
\newcommand{\funcname}[1]{
  \item[Function:] \texttt{#1}
}
\newenvironment{funcdesc}{
  \item[Description:]
}{}
\end{htmlonly}


% While rapport3/artikel3 are otherwise nice classes, 
% itemize looks awful.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%begin{latexonly}
\makeatletter
\renewenvironment{itemize}{%
  \ifnum \@itemdepth >3
    \@toodeep
  \else
    \advance\@itemdepth \@ne
    \edef\@itemitem{labelitem\romannumeral\the\@itemdepth}%
    \list{\csname\@itemitem\endcsname}%
         {%
            \if@revlabel
              \def\makelabel##1{\hskip .5\unitindent{\hfil ##1}}\else
	      					    %^^^^^^^^^ Changed
              \def\makelabel##1{\hfil ##1}
	      		       %^^^^^^^^^ Changed
            \fi
          }%
  \fi}
 {\global\@ignoretrue \endlist}
\makeatletter
%end{latexonly}
