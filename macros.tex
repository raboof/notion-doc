\lstset{
  extendedchars=true,
  breaklines=true,
  basicstyle=\tt,
  % Some adjustments for slightly more sensible line breaking
  alsoletter={"}
  alsoother={_}
%  prebreak=\textbackslash,
}

\newcommand{\note}[1]{\color{red}**#1**}
\newcommand{\file}[1]{\emph{#1}}
\newcommand{\type}[1]{#1}
\newcommand{\spec}[1]{#1}
\newcommand{\code}[1]{\lstinline!#1!}
\newcommand{\var}[1]{\lstinline!#1!}
\newcommand{\command}[1]{\lstinline!#1!}

\newcommand{\key}[1]{\textbf{#1}}

% Latex2html is broken shit and can't do hyperlink/hypertarget but
% only some html-specific crap so we must do this too with wrappers.
\newcommand{\hyperlabel}[1]{\hypertarget{#1}{}}
\newcommand{\fnref}[1]{\hyperlink{fn:#1}{\code{#1}}}
\newcommand{\myhref}[2]{\hyperlink{#1}{#2}}

\newcommand{\indextype}[1]{\index{#1@\type{#1}}}
  
% function tables
\newlength{\fndw}
\newlength{\descw}
\settowidth{\descw}{\begin{tabular}{ll}Description: & \end{tabular}}
\setlength{\fndw}{\textwidth}
\addtolength{\fndw}{-\descw}

\newenvironment{function}{
  \begin{tabular*}{\textwidth}{rp{\fndw}}
}{
  \\
  \end{tabular*}
  \par
}
\newcommand{\synopsis}[1]{
  Synopsis: & \code{#1} \\
  Description: &
}
\newcommand{\funcname}[1]{
  Function: & \code{#1} \\
  Description: &
}
\newenvironment{funcdesc}{}{}

% HTML
\begin{htmlonly}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\var}[1]{\texttt{#1}}
\newcommand{\command}[1]{\texttt{#1}}
\newcommand{\hyperlabel}[1]{\label{#1}}
\newcommand{\fnref}[1]{\htmlref{\texttt{#1}}{fn:#1}}
\newcommand{\myhref}[2]{\htmlref{#2}{#1}}

\newenvironment{function}{
  \begin{description}
}{
  \end{description}
}
\newcommand{\synopsis}[1]{
  \item[Synopsis:] \texttt{#1}
}
\newcommand{\funcname}[1]{
  \item[Function:] \texttt{#1}
}
\newenvironment{funcdesc}{
  \item[Description:]
}{}
\end{htmlonly}
